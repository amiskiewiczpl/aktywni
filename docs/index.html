<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aktywni — wydarzenia sportowe</title>
  <meta name="description" content="Strona dla aktywnych sportowo: odkrywaj i twórz wydarzenia, zapisuj się, sprawdzaj lokalizacje na mini-mapie." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Leaflet (mapa) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

  <!-- Leaflet Geocoder (Photon/Komoot – większa baza) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
  <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>


  <!-- UX/A11y -->
  <style>
    :focus-visible{ outline:3px solid #66e1c6; outline-offset:3px; border-radius:6px; }
    .skip-link{ position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }
    .skip-link:focus{ position:fixed; left:16px; top:16px; width:auto; height:auto; z-index:9999; background:#0b1020; color:#fff; padding:10px 14px; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,.4); }
    header .btn:focus-visible, header .btn:hover{ box-shadow:0 0 0 3px rgba(102,225,198,.35) inset; }

    /* Ciemny motyw dla inputu geokodera */
    .leaflet-control-geocoder,
    .leaflet-control-geocoder-expanded { background:#0f172a !important; border:1px solid #223 !important; }
    .leaflet-control-geocoder-form input {
      color:#e5e7eb !important; background:#0b1020 !important; border:1px solid #334155 !important;
      padding:.45rem .6rem !important; border-radius:.6rem !important;
    }
    .leaflet-control-geocoder-alternatives { background:#0f172a !important; color:#e5e7eb !important; }
    .leaflet-control-geocoder-alternatives a { color:#e5e7eb !important; }
    .leaflet-control-geocoder-icon { filter: invert(1) opacity(.9); }
    @media (prefers-reduced-motion: reduce){
      *{ animation-duration:0.001ms !important; animation-iteration-count:1 !important; transition-duration:0.001ms !important; scroll-behavior:auto !important; }
    }
  </style>
  <script type="module" crossorigin src="/aktywni/assets/index-JNSkmA-Q.js"></script>
  <link rel="stylesheet" crossorigin href="/aktywni/assets/index-BCHqflRY.css">
</head>
<body>
  <a class="skip-link" href="#app">Pomiń nawigację, przejdź do treści</a>

  <header class="nav">
    <div class="nav-inner container">
      <a href="#/" class="brand"><span class="logo"></span> Aktywni</a>
      <nav style="display:flex; gap:8px; align-items:center" aria-label="Główna nawigacja">
        <a href="#/wydarzenia" id="nav-events" class="btn">Wydarzenia</a>
        <a href="#/nowe" id="nav-create" class="btn link" title="Dodaj nowe wydarzenie">Stwórz wydarzenie</a>
        <a href="#/login" id="nav-login" class="btn">Login</a>
        <a href="#/profil" id="nav-profile" class="btn" style="display:none">Profil</a>
      </nav>
    </div>
  </header>

  <main id="app" role="main" tabindex="-1" aria-live="polite"></main>

  <!-- Home -->
  <template id="home-tpl">
    <section class="hero container">
      <div class="hero-grid">
        <div class="glass" style="padding:22px">
          <h1>Twoje sportowe centrum wydarzeń</h1>
          <p>Odkrywaj lokalne aktywności, zapisuj się na wydarzenia i twórz własne — od biegania po siatkówkę.
             Mini‑mapa pomoże Ci szybko sprawdzić lokalizację.</p>
          <div class="hero-cta">
            <a class="btn primary" href="#/wydarzenia">Przeglądaj wydarzenia</a>
            <a class="btn link" href="#/nowe" style="color:var(--brand-2)">Stwórz wydarzenie</a>
          </div>
        </div>
        <div class="art glass">
          <span class="badge">Aktywni razem ✦</span>
        </div>
      </div>
    </section>

    <section class="section container">
      <h2 style="margin:0 0 12px">Jak to działa?</h2>
      <div class="cards">
        <div class="card"><strong>Krok 1</strong><p class="meta">Wybierz wydarzenie z listy i otwórz szczegóły.</p></div>
        <div class="card"><strong>Krok 2</strong><p class="meta">Sprawdź datę, miejsce i podgląd na mini‑mapie.</p></div>
        <div class="card"><strong>Krok 3</strong><p class="meta">Zapisz się. Liczba miejsc aktualizuje się automatycznie*</p><p class="meta">*W demo zapisy są lokalne.</p></div>
      </div>
    </section>
  </template>

  <!-- Lista wydarzeń -->
  <template id="events-tpl">
    <section class="section container">
      <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px">
        <h2 style="margin:0">Wydarzenia</h2>
        <a class="btn link" href="#/nowe" style="color:var(--brand-2)">Stwórz wydarzenie</a>
      </div>
      <div id="events-list" class="stack" style="display:grid; gap:12px"></div>
    </section>
  </template>

  <!-- Login -->
  <template id="login-tpl">
    <section class="section container">
      <h2 style="margin:0 0 10px">Logowanie</h2>
      <form id="login-form" class="glass" style="padding:16px; max-width:520px">
        <div class="field"><label>E‑mail</label><input name="email" type="email" required placeholder="jan@example.com" /></div>
        <div class="field"><label>Imię (na potrzeby demo)</label><input name="name" required placeholder="Jan" /></div>
        <button class="btn primary" type="submit">Zaloguj (demo)</button>
        <p class="meta" style="margin-top:8px">To tylko demo — dane trafiają lokalnie.</p>
      </form>
    </section>
  </template>

  <!-- Profil + poziomy sportów -->
  <template id="profile-tpl">
    <section class="section container">
      <h2 style="margin:0 0 10px">Twój profil</h2>
      <div class="glass" style="padding:16px; max-width:780px">
        <div id="profile-box"></div>
        <hr style="border:none; border-top:1px solid #223; margin:12px 0">
        <h3 style="margin:0 0 8px; font-size:18px">Poziomy w sportach</h3>
        <form id="skills-form" class="stack" style="display:grid; gap:10px"></form>

        <!-- Preferencje kolarstwa w profilu -->
        <div id="skills-cycling" class="stack" style="display:none; gap:10px; margin-top:8px">
          <h4 style="margin:8px 0 0; font-size:16px">Kolarstwo — preferencje</h4>
          <div class="field" style="display:grid; grid-template-columns:200px 1fr; gap:12px; align-items:center">
            <label>Dystans</label>
            <select id="skill-cyc-dist"></select>
          </div>
          <div class="field" style="display:grid; grid-template-columns:200px 1fr; gap:12px; align-items:center">
            <label>Tempo (km/h)</label>
            <select id="skill-cyc-pace"></select>
          </div>
        </div>

        <div style="display:flex; gap:8px; margin-top:12px">
          <button id="btn-save-skills" class="btn primary">Zapisz poziomy</button>
          <button id="btn-logout" class="btn">Wyloguj</button>
          <a href="#/wydarzenia" class="btn link">Wróć do wydarzeń</a>
        </div>
      </div>
    </section>
  </template>

  <!-- Nowe wydarzenie -->
  <template id="create-tpl">
    <section class="section container">
      <h2 style="margin:0 0 10px">Dodaj nowe wydarzenie</h2>

      <form id="create-form" class="glass" style="padding:16px">
        <div class="field">
          <label>Nazwa wydarzenia</label>
          <input name="title" required placeholder="Bieg nad Wisłą" />
        </div>

        <!-- Data + godzina (natywny kalendarz + time) -->
        <div class="field" style="display:grid; grid-template-columns:1fr 1fr; gap:12px">
          <div>
            <label>Data</label>
            <input id="date" type="date" required />
          </div>
          <div>
            <label>Godzina</label>
            <input id="time" type="time" required />
          </div>
          <p class="meta" style="grid-column:1/-1">Wybierz z kalendarza i ustaw godzinę — tylko przyszłe terminy.</p>
        </div>

        <div class="field">
          <label>Miejsce (wyszukaj na mapie lub skorzystaj z wyszukiwarki poniżej)</label>
          <input id="place" name="place" required placeholder="np. Bulwary Wiślane, Warszawa" />
        </div>

        <div class="field">
          <label>Lokalizacja na mapie</label>
          <div id="create-map" style="height:280px; border-radius:14px; overflow:hidden; background:#223"></div>
          <input type="hidden" name="lat" id="lat" required />
          <input type="hidden" name="lng" id="lng" required />
        </div>

        <div class="field">
          <label>Baner wydarzenia</label>
          <input id="bannerFile" type="file" accept="image/*" />
          <input id="bannerUrl" name="banner" type="url" placeholder="lub wklej URL (opcjonalnie)" />
        </div>

        <!-- Sport, poziom, płeć -->
        <div class="field" style="display:grid; grid-template-columns:repeat(3,1fr); gap:12px">
          <div>
            <label>Sport</label>
            <select name="sport" id="sport-select" required></select>
          </div>
          <div>
            <label>Poziom</label>
            <select name="level" id="level-select" required></select>
          </div>
          <div>
            <label>Płeć</label>
            <select name="sex" id="sex-select" required>
              <option value="mix">Mix</option>
              <option value="women">Kobiety</option>
              <option value="men">Mężczyźni</option>
            </select>
          </div>
        </div>

        <!-- Pola dodatkowe dla kolarstwa -->
        <div id="cycling-extra" class="field" style="display:none; grid-template-columns:repeat(2,1fr); gap:12px">
          <div>
            <label>Dystans</label>
            <select name="cyclingDistance" id="cycling-distance"></select>
          </div>
          <div>
            <label>Tempo (km/h)</label>
            <select name="cyclingPace" id="cycling-pace"></select>
          </div>
        </div>

        <div class="field"><label>Limit miejsc</label><input name="capacity" type="number" min="1" value="20" required /></div>
        <div class="field"><label>Opis</label><textarea name="desc" rows="3" placeholder="Przyjemne tempo, każdy mile widziany."></textarea></div>

        <div style="display:flex; gap:8px; align-items:center; justify-content:space-between">
          <button class="btn primary" type="submit">Zapisz wydarzenie</button>
          <a class="btn" href="#/wydarzenia">Anuluj</a>
        </div>
      </form>
    </section>
  </template>

  <!-- Modal szczegółów wydarzenia -->
  <div class="modal" id="event-modal" aria-hidden="true" role="dialog" aria-label="Szczegóły wydarzenia">
    <div class="modal-card">
      <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px">
        <h3 id="m-title" style="margin:0">Wydarzenie</h3>
        <button class="btn" id="m-close">Zamknij</button>
      </div>
      <div class="modal-grid">
        <div>
          <div id="m-banner" class="banner" style="height:160px; border-radius:14px; overflow:hidden; margin-bottom:10px; background:#223"></div>
          <p class="meta" id="m-desc"></p>
          <div id="map"></div>
        </div>
        <div>
          <div class="card" style="margin-bottom:12px">
            <div style="display:flex; gap:12px; align-items:center; justify-content:space-between">
              <div>
                <div class="title" id="m-title-sm"></div>
                <div class="meta" id="m-when"></div>
                <div class="meta" id="m-place"></div>
                <div class="meta" id="m-sport"></div>
                <div class="meta" id="m-cycling" style="display:none"></div>
              </div>
              <span id="m-cap-pill" class="pill">--</span>
            </div>
          </div>
          <form id="join-form" class="glass" style="padding:12px">
            <div class="field"><label>Twoje imię</label><input name="name" required placeholder="Ania" /></div>
            <div class="field"><label>Twój e‑mail (opcjonalnie)</label><input name="email" type="email" placeholder="ania@example.com" /></div>
            <button class="btn primary" type="submit">Zapisz się</button>
            <div id="join-msg" style="margin-top:8px"></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <footer class="container">
    <small>© <span id="year"></span> Aktywni. Demo bez backendu — zapisy i wydarzenia zapisywane lokalnie w przeglądarce.</small>
  </footer>

</body>
</html>
